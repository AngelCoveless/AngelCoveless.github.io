<!--
  - Full screen clock (24-hour)
  - Copyright (c) 2020 Project Nayuki. All rights reserved.
  - 
  - https://www.nayuki.io/page/full-screen-clock-javascript
  -->
<!DOCTYPE html>
<html style="height:100%; margin:0; padding:0">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>Clock</title>
		<style type="text/css">
			/* Customizable font and colors */
			html {
				background-color: #7e7e7e;
				font-family: sans-serif;
				font-weight: bold;
				color: #FFFFFF;
			}
		</style>
	</head>
	
	<body id= "bodyW" style="display:flex; height:100%; margin: 0; padding:0; justify-content:center; align-items:center; flex-direction: column;">

		<span id="clocktext" style="font-kerning:none"></span>

		<span id="clocktext2" style="font-kerning:none"></span>

		<script>
			"use strict";
			
			var textElem = document.getElementById("clocktext");
			var textElem2 = document.getElementById("clocktext2");
			var datoBody = document.getElementById("bodyW");
			var targetWidth = 0.9;  // Proportion of full screen width
			var targetWidth2 = 0.6;  
			var curFontSize = 20;  // Do not change
			var curFontSize2 = 20;  // Do not change
			var Minutos = 0;
			var Horas = 0;
			var colorB = 0; //Color 0 = Verde; 1 = Rojo,
			var ProxCam = "";


			function updateClock() {
				var d = new Date();
				var s = "";
				Minutos = d.getMinutes();
				Horas = d.getHours();

				s += (10 > d.getHours  () ? "0" : "") + d.getHours  () + ":";
				s += (10 > d.getMinutes() ? "0" : "") + d.getMinutes();
				updateBackGround();
				textElem.textContent = s;
				textElem2.textContent = ProxCam;
				setTimeout(updateClock, 60000 - d.getTime() % 60000 + 100);
			}
			
			function updateBackGround(){

			/* Horario de verano */
				switch(Horas){
					case 7:
						if(Minutos<30){
							colorB = 0;
							ProxCam = "7:30";
						}else{
							colorB = 1;
							ProxCam = "8:30";
						}
					break;
					case 8:
						if(Minutos<30){
							colorB = 1;
							ProxCam = "8:30";
						}else{
							colorB = 0;
							ProxCam = "9:00";
						}
					break;
					case 9:
					    colorB = 1;
						ProxCam = "10:00";
					break;
					case 10:
						if(Minutos<30){
							colorB = 0;
							ProxCam = "10:30";
						}else{
							colorB = 1;
							ProxCam = "11:30";
						}
					break;
					case 11:
						if(Minutos<30){
							colorB = 1;
							ProxCam = "11:30";
						}else{
							colorB = 0;
							ProxCam = "12:00";
						}
					break;
					case 12:
					    colorB = 1;
						ProxCam = "13:00";
					break;
					case 13:
						if(Minutos<30){
							colorB = 0;
							ProxCam = "13:30";
						}else{
							colorB = 1;
							ProxCam = "14:30";
						}
					break;
					case 14:
						if(Minutos<30){
							colorB = 1;
							ProxCam = "14:30";
						}else{
							colorB = 0;
							ProxCam = "15:00";
						}
					break;
					default:
						colorB = 0;
						ProxCam = "7:00";
					break;
				}
                if(colorB == 0){
                    document.body.style.backgroundColor = 'green';
                }else{
                    document.body.style.backgroundColor = 'red';
                }
			}
			
			function updateTextSize() {
				for (var i = 0; 3 > i; i++) {  // Iterate for better better convergence
					curFontSize *= targetWidth / (textElem.offsetWidth / textElem.parentNode.offsetWidth);
					curFontSize2 *= targetWidth2 / (textElem2.offsetWidth / textElem2.parentNode.offsetWidth);
					textElem.style.fontSize = curFontSize + "px";
					textElem2.style.fontSize = curFontSize2 + "px";
					
					if(datoBody.offsetHeight <= datoBody.offsetWidth){
						curFontSize = datoBody.offsetHeight/2 - (datoBody.offsetHeight/2)*0.10;
						curFontSize2 = curFontSize - (curFontSize*(1-targetWidth2));
						textElem.style.fontSize = curFontSize + "px";
						textElem2.style.fontSize = curFontSize2 + "px";
					}

				}
			}
			
			updateClock();
			updateTextSize();
			window.addEventListener("resize", updateTextSize);
		</script>
	</body>
</html>
